<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1251px" preserveAspectRatio="none" style="width:1664px;height:1251px;background:#FFFFFF;" version="1.1" viewBox="0 0 1664 1251" width="1664px" zoomAndPan="magnify"><defs><filter height="300%" id="f1t0ipgr672v9h" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="34.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="283.0938"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="34.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="366.1641"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="713.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="444.2344"/><rect fill="#FFA500" filter="url(#f1t0ipgr672v9h)" height="614.3906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="805" y="515.5"/><rect fill="#800080" filter="url(#f1t0ipgr672v9h)" height="100.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="982.5" y="847.9609"/><rect fill="#0000FF" filter="url(#f1t0ipgr672v9h)" height="57.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1160" y="877.0938"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1302" y="906.2266"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="926.1953" style="stroke:#000000;stroke-width:2.0;" width="1640.5" x="10" y="239.8281"/><rect fill="#FFFFFF" height="83.0703" style="stroke:none;stroke-width:1.0;" width="1640.5" x="10" y="325.2266"/><rect fill="#FFFFFF" height="757.7266" style="stroke:none;stroke-width:1.0;" width="1640.5" x="10" y="408.2969"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="233.7969" style="stroke:#000000;stroke-width:2.0;" width="1014" x="354.5" y="729.4297"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="131.3984" style="stroke:#000000;stroke-width:2.0;" width="638.5" x="720" y="824.8281"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="152.6641" style="stroke:#000000;stroke-width:2.0;" width="613" x="297" y="977.2266"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="88.3984" style="stroke:#000000;stroke-width:2.0;" width="545.5" x="354.5" y="1034.4922"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="228.5" x2="228.5" y1="67.2969" y2="1183.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="444.5" x2="444.5" y1="67.2969" y2="1183.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="810" x2="810" y1="67.2969" y2="1183.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="987" x2="987" y1="67.2969" y2="1183.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1165" x2="1165" y1="67.2969" y2="1183.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1306.5" x2="1306.5" y1="67.2969" y2="1183.0234"/><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="151" x="151.5" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="158.5" y="51.9951">Console App: Start</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="151" x="151.5" y="1182.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="158.5" y="1202.0186">Console App: Start</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="157" x="364.5" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="371.5" y="51.9951">LodeRunner Service</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="157" x="364.5" y="1182.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="371.5" y="1202.0186">LodeRunner Service</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="156" x="730" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="737" y="51.9951">InternalMessageBus</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="156" x="730" y="1182.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="737" y="1202.0186">InternalMessageBus</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="171" x="900" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="907" y="51.9951">StatusUpdateListener</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="171" x="900" y="1182.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="907" y="1202.0186">StatusUpdateListener</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="156" x="1085" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="1092" y="51.9951">ClientStatusService</text><rect fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="156" x="1085" y="1182.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="1092" y="1202.0186">ClientStatusService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1265.5" y="63.9951">CosmosDB</text><path d="M1289,15 C1289,5 1307,5 1307,5 C1307,5 1325,5 1325,15 L1325,41 C1325,51 1307,51 1307,51 C1307,51 1289,51 1289,41 L1289,15 " fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1289,15 C1289,25 1307,25 1307,25 C1307,25 1325,25 1325,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1265.5" y="1195.0186">CosmosDB</text><path d="M1289,1208.3203 C1289,1198.3203 1307,1198.3203 1307,1198.3203 C1307,1198.3203 1325,1198.3203 1325,1208.3203 L1325,1234.3203 C1325,1244.3203 1307,1244.3203 1307,1244.3203 C1307,1244.3203 1289,1244.3203 1289,1234.3203 L1289,1208.3203 " fill="#FEFECE" filter="url(#f1t0ipgr672v9h)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1289,1208.3203 C1289,1218.3203 1307,1218.3203 1307,1218.3203 C1307,1218.3203 1325,1218.3203 1325,1208.3203 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="34.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="283.0938"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="34.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="366.1641"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="713.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="440" y="444.2344"/><rect fill="#FFA500" filter="url(#f1t0ipgr672v9h)" height="614.3906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="805" y="515.5"/><rect fill="#800080" filter="url(#f1t0ipgr672v9h)" height="100.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="982.5" y="847.9609"/><rect fill="#0000FF" filter="url(#f1t0ipgr672v9h)" height="57.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1160" y="877.0938"/><rect fill="#FFFFFF" filter="url(#f1t0ipgr672v9h)" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1302" y="906.2266"/><ellipse cx="7.5" cy="97.6797" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="217,94.4297,227,98.4297,217,102.4297,221,98.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="12" x2="223" y1="98.4297" y2="98.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="15" y="93.3638">Start LodeRunner Console App</text><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="271" y1="127.5625" y2="127.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="271" x2="271" y1="127.5625" y2="140.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="230" x2="271" y1="140.5625" y2="140.5625"/><polygon fill="#A80036" points="240,136.5625,230,140.5625,240,144.5625,236,140.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="236" y="122.4966">Register Temination Events</text><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="271" y1="169.6953" y2="169.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="271" x2="271" y1="169.6953" y2="182.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="230" x2="271" y1="182.6953" y2="182.6953"/><polygon fill="#A80036" points="240,178.6953,230,182.6953,240,186.6953,236,182.6953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="236" y="164.6294">Validate Arguments</text><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="271" y1="211.8281" y2="211.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="271" x2="271" y1="211.8281" y2="224.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="230" x2="271" y1="224.8281" y2="224.8281"/><polygon fill="#A80036" points="240,220.8281,230,224.8281,240,228.8281,236,224.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="236" y="206.7622">Creates Start-up Config</text><path d="M10,239.8281 L76,239.8281 L76,246.8281 L66,256.8281 L10,256.8281 L10,239.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="926.1953" style="stroke:#000000;stroke-width:2.0;" width="1640.5" x="10" y="239.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="252.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="56" x="91" y="252.0386">[DryRun]</text><polygon fill="#A80036" points="428,279.0938,438,283.0938,428,287.0938,432,283.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="434" y1="283.0938" y2="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="236" y="278.0278">Start Service</text><path d="M455,261.9609 L455,286.9609 L805,286.9609 L805,271.9609 L795,261.9609 L455,261.9609 " fill="#FBFB77" filter="url(#f1t0ipgr672v9h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M795,261.9609 L795,271.9609 L805,271.9609 L795,261.9609 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="461" y="279.0278">Only validate parameters, but do not execute tests</text><polygon fill="#A80036" points="240,313.2266,230,317.2266,240,321.2266,236,317.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="234" x2="444" y1="317.2266" y2="317.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="246" y="312.1606">Output Dry-Run report</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1650.5" y1="326.2266" y2="326.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="15" y="336.437">[Command Mode]</text><polygon fill="#A80036" points="428,362.1641,438,366.1641,428,370.1641,432,366.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="434" y1="366.1641" y2="366.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="236" y="361.0981">Start Service</text><path d="M455,345.0313 L455,370.0313 L749,370.0313 L749,355.0313 L739,345.0313 L455,345.0313 " fill="#FBFB77" filter="url(#f1t0ipgr672v9h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M739,345.0313 L739,355.0313 L749,355.0313 L739,345.0313 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="461" y="362.0981">Executes test utilizing Command Line args</text><polygon fill="#A80036" points="240,396.2969,230,400.2969,240,404.2969,236,400.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="234" x2="444" y1="400.2969" y2="400.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="246" y="395.231">Output execution test results</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1650.5" y1="409.2969" y2="409.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="15" y="419.5073">[Client Mode]</text><polygon fill="#A80036" points="428,440.2344,438,444.2344,428,448.2344,432,444.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229" x2="434" y1="444.2344" y2="444.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="236" y="439.1685">Start Service</text><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="492" y1="473.3672" y2="473.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="492" y1="473.3672" y2="486.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451" x2="492" y1="486.3672" y2="486.3672"/><polygon fill="#A80036" points="461,482.3672,451,486.3672,461,490.3672,457,486.3672" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="457" y="468.3013">Ensure secrets</text><polygon fill="#A80036" points="793,511.5,803,515.5,793,519.5,797,515.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="515.5" y2="515.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="457" y="510.4341">Subscribe LogStatus to OnStatusUpdate</text><polygon fill="#A80036" points="793,540.6328,803,544.6328,793,548.6328,797,544.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="544.6328" y2="544.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="457" y="539.5669">Publish</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="506" y="539.5669">"Inititalizing"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="609" y="539.5669">status</text><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="492" y1="587.3984" y2="587.3984"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="492" y1="587.3984" y2="600.3984"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451" x2="492" y1="600.3984" y2="600.3984"/><polygon fill="#A80036" points="461,596.3984,451,600.3984,461,604.3984,457,600.3984" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="457" y="582.3325">Register SysObjects and Services</text><path d="M20,557.6328 L20,612.6328 L431,612.6328 L431,567.6328 L421,557.6328 L20,557.6328 " fill="#FBFB77" filter="url(#f1t0ipgr672v9h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,557.6328 L421,567.6328 L431,567.6328 L421,557.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="386" x="26" y="574.6997">Registers Config, CosmosDBSettings, CosmosDBRepository,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="26" y="589.8325">ClientStatusService, LoadTestConfigService and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="26" y="604.9653">TerminateService OnCancellationRequest</text><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="492" y1="643.1641" y2="643.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="492" y1="643.1641" y2="656.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451" x2="492" y1="656.1641" y2="656.1641"/><polygon fill="#A80036" points="461,652.1641,451,656.1641,461,660.1641,457,656.1641" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="457" y="638.0981">Check CosmosDB Connection</text><polygon fill="#A80036" points="793,681.2969,803,685.2969,793,689.2969,797,685.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="685.2969" y2="685.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="457" y="680.231">Subscribe UpdateCosmosStatus to OnStatusUpdate</text><polygon fill="#A80036" points="793,710.4297,803,714.4297,793,718.4297,797,714.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="714.4297" y2="714.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="457" y="709.3638">Publish</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="506" y="709.3638">"Ready"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="569" y="709.3638">status</text><path d="M354.5,729.4297 L432.5,729.4297 L432.5,736.4297 L422.5,746.4297 L354.5,746.4297 L354.5,729.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="233.7969" style="stroke:#000000;stroke-width:2.0;" width="1014" x="354.5" y="729.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="369.5" y="742.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159" x="447.5" y="741.6401">[Client Liveness Status]</text><path d="M1373.5,734.4297 L1373.5,804.4297 L1631.5,804.4297 L1631.5,744.4297 L1621.5,734.4297 L1373.5,734.4297 " fill="#FBFB77" filter="url(#f1t0ipgr672v9h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1621.5,734.4297 L1621.5,744.4297 L1631.5,744.4297 L1621.5,734.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="1379.5" y="751.4966">Update status every 5 secs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1379.5" y="766.6294">use last status and fresh timestamp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="1379.5" y="781.7622">to ensure that the status is current</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1379.5" y="796.895">and is not evicted based on TTL</text><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="492" y1="767.6953" y2="767.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="492" y1="767.6953" y2="780.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451" x2="492" y1="780.6953" y2="780.6953"/><polygon fill="#A80036" points="461,776.6953,451,780.6953,461,784.6953,457,780.6953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="457" y="762.6294">Update LastUpdated time</text><polygon fill="#A80036" points="793,805.8281,803,809.8281,793,813.8281,797,809.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="809.8281" y2="809.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="457" y="804.7622">Publish updated status</text><path d="M720,824.8281 L957,824.8281 L957,831.8281 L947,841.8281 L720,841.8281 L720,824.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="131.3984" style="stroke:#000000;stroke-width:2.0;" width="638.5" x="720" y="824.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="735" y="837.895">Process Published Events</text><polygon fill="#A80036" points="970.5,843.9609,980.5,847.9609,970.5,851.9609,974.5,847.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="815" x2="976.5" y1="847.9609" y2="847.9609"/><polygon fill="#A80036" points="1148,873.0938,1158,877.0938,1148,881.0938,1152,877.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="992.5" x2="1154" y1="877.0938" y2="877.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="999.5" y="872.0278">Post Update</text><polygon fill="#A80036" points="1290,902.2266,1300,906.2266,1290,910.2266,1294,906.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1170" x2="1296" y1="906.2266" y2="906.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1177" y="901.1606">Upsert Document</text><polygon fill="#A80036" points="1181,916.2266,1171,920.2266,1181,924.2266,1177,920.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1175" x2="1306" y1="920.2266" y2="920.2266"/><polygon fill="#A80036" points="1003.5,930.2266,993.5,934.2266,1003.5,938.2266,999.5,934.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="997.5" x2="1164" y1="934.2266" y2="934.2266"/><polygon fill="#A80036" points="826,944.2266,816,948.2266,826,952.2266,822,948.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="820" x2="986.5" y1="948.2266" y2="948.2266"/><path d="M297,977.2266 L375,977.2266 L375,984.2266 L365,994.2266 L297,994.2266 L297,977.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="152.6641" style="stroke:#000000;stroke-width:2.0;" width="613" x="297" y="977.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="312" y="990.2935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="390" y="989.437">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="395" y="989.437">Await Assignment</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="515" y="989.437">]</text><polygon fill="#FBFB77" filter="url(#f1t0ipgr672v9h)" points="317,999.3594,572,999.3594,582,1010.3594,572,1022.3594,317,1022.3594,307,1010.3594,317,999.3594" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="319" y="1015.4263">Awaits work notified from Change feed</text><path d="M354.5,1034.4922 L584.5,1034.4922 L584.5,1041.4922 L574.5,1051.4922 L354.5,1051.4922 L354.5,1034.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="88.3984" style="stroke:#000000;stroke-width:2.0;" width="545.5" x="354.5" y="1034.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="185" x="369.5" y="1047.5591">On Cancellation Request</text><polygon fill="#A80036" points="793,1068.7578,803,1072.7578,793,1076.7578,797,1072.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="799" y1="1072.7578" y2="1072.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="457" y="1067.6919">Publish</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="506" y="1067.6919">"Terminating"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="617" y="1067.6919">status</text><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="492" y1="1101.8906" y2="1101.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="492" y1="1101.8906" y2="1114.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451" x2="492" y1="1114.8906" y2="1114.8906"/><polygon fill="#A80036" points="461,1110.8906,451,1114.8906,461,1118.8906,457,1114.8906" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="457" y="1096.8247">Exit Await Loop</text><polygon fill="#A80036" points="240,1154.0234,230,1158.0234,240,1162.0234,236,1158.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="234" x2="444" y1="1158.0234" y2="1158.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="246" y="1152.9575">Terminating Application</text><!--MD5=[e8fe5dbd5b8dd6cf11453806478f21bf]
@startuml
participant "Console App: Start" as L8rConsoleAppStart
participant "LodeRunner Service" as L8rService
participant "InternalMessageBus" as EventBus
participant "StatusUpdateListener" as StatusListener
participant "ClientStatusService" as ClientStatusService
database    "CosmosDB" as CosmosDB

[o-> L8rConsoleAppStart: Start LodeRunner Console App

L8rConsoleAppStart -> L8rConsoleAppStart: Register Temination Events
L8rConsoleAppStart -> L8rConsoleAppStart: Validate Arguments
L8rConsoleAppStart -> L8rConsoleAppStart: Creates Start-up Config


alt DryRun 
L8rConsoleAppStart -> L8rService: Start Service  
activate L8rService
note right
    Only validate parameters, but do not execute tests
end note
L8rService - -> L8rConsoleAppStart : Output Dry-Run report  
deactivate L8rService
else Command Mode
L8rConsoleAppStart -> L8rService: Start Service
activate L8rService
note right
    Executes test utilizing Command Line args
end note
L8rService - -> L8rConsoleAppStart : Output execution test results
deactivate L8rService
else Client Mode
L8rConsoleAppStart -> L8rService: Start Service
activate L8rService
L8rService -> L8rService: Ensure secrets
L8rService -> EventBus: Subscribe LogStatus to OnStatusUpdate 
activate EventBus #Orange

L8rService -> EventBus : Publish **"Inititalizing"** status
L8rService -> L8rService: Register SysObjects and Services
note left
    Registers Config, CosmosDBSettings, CosmosDBRepository, 
    ClientStatusService, LoadTestConfigService and 
    TerminateService OnCancellationRequest
end note
L8rService -> L8rService: Check CosmosDB Connection
L8rService -> EventBus: Subscribe UpdateCosmosStatus to OnStatusUpdate 
L8rService -> EventBus : Publish **"Ready"** status

loop Client Liveness Status
    L8rService -> L8rService: Update LastUpdated time
    L8rService -> EventBus : Publish updated status
    Group Process Published Events
        EventBus -> StatusListener
        activate StatusListener #Purple
        StatusListener -> ClientStatusService : Post Update
        activate ClientStatusService #Blue
        ClientStatusService -> CosmosDB : Upsert Document
        activate CosmosDB
        CosmosDB - -> ClientStatusService
        deactivate CosmosDB
        ClientStatusService - -> StatusListener
        deactivate ClientStatusService
        StatusListener - -> EventBus
        deactivate StatusListener
    end
end
note left
    Update status every 5 secs 
    use last status and fresh timestamp 
    to ensure that the status is current
    and is not evicted based on TTL
end note

loop **Await Assignment**
    hnote over L8rService : Awaits work notified from Change feed
    group **On Cancellation Request**
        L8rService -> EventBus : Publish **"Terminating"** status
        L8rService -> L8rService: Exit Await Loop
    end
    deactivate EventBus
end
L8rService - -> L8rConsoleAppStart : Terminating Application
deactivate L8rService
end
@enduml

PlantUML version 1.2021.17beta9(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>